<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Gravity Effect Image</title>

  <script>
  </script>
  <script>

    var wBaseImage = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY51AAABcWlDQ1BpY2MAACjPlZG9S8NAGMaftpZWrXbQQcQhQxWHFoqCOEoFu1SHtoJVl+SatEKShkuKFFfBxaHgILr4Nfgf6Cq4KgiCIog4+Bf4tUiJ7zWFFtHBOy7vj+fyvNw9B/gzOjPsriRgmA7PplPSUmFZCr0giG70Iwy/zGxrPjeXx5/j8w4+UW8Tohf+N3qLqs0AX5h4ilncIZ4hzqw7luBt4kFWlovEh8RxTgckvhK64vGz4JLH74J5PjtLdxM9pVIHKx3MytwgHieOGXqVtc4jbhJRzcUc1WFaI7CRRRopSFBQxRp0OEhQNSmz333Jpm8BFfIw+lqogZOjhDJ546RWqatKVSNdpamjJnL/maetTU543SMpIPjkum+jQGgHaNRd9+vIdRvHQOARuDDb/grlNP1Ber2txQ6A6CZwdtnWlF3gfAsYerBkLjelAC2/pgGvp0BfARi4AXpWvKxa+zi5B/Ib9ETXwN4+MEb/R1e/AXbyZ8tSow9qAAAACXBIWXMAAA9hAAAPYQGoP6dpAAAfp0lEQVR4Xu3dCXhU1dkH8HdmMpOELQjIqqyCgFofsFoRKQoKiBp3tECpiDvaWlTcvqKViriLRSta1Jq6tKACrrh8gCugqA8iVWRVhMoSEEgyW2a+8945fJBwZ+6dJHPnvjP/H88h59xklmTu/Ofce8891xNXCABAAK/+CgDgeggsABADgQUAYiCwAEAMBBYAiIHAAgAxEFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBQBiILAAQAwEFgCIgcACADEQWAAgBgILAMRAYAGAGAgsABADgQUAYiCwAEAMBBYAiIHAAgAxEFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBQBiILAAQAwEFgCIgcACADEQWAAgBgILAMRAYAGAGAgsABADgQUAYiCwAEAMBBYAiIHAAgAxEFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBTkhrkrw4YcpOGAABdu1o4qiIqrweGiP10vBkhKq6tyZgsOHU3D27MQNQCRPXNF1ALEqVSAFNmzQrdTCo0ZRo3/+U7dAEgQWiBdauJB8J5+sW9Z4hY/v3EkB1fMCWbBJCOLF7r5b1+zxqBK7665EA5IKh8O65h7oYYFo1apEPR7yJZq2RVQpxqovjtjAevrpp2ndunXET9+jVlgre3/u8MMPp1GjRuml9syYMYM2btxo1O0+ltfrpV69etFFF12kl6Yn3d8vW0KhEPXv359KS0v1EmeFysrIN2aMbqWnevlyKjzqKN1y1j/+8Q9as2ZNRl7fvetfYWEhtWrVirp06UJ9+vQx6uKpX04UFRzGLoj6lj179uh7TO4///mP6W3TLepNre/R2pYtW0zvw81lzJgx+tk7r7J377jqLdWpVI0cqe/FOTt27DD9GzpVjj/++PiTTz6pn4084vZhDRkyRNfqZ/jw4bqW3LBhw3StftLpfZx22mm6JkdxcbGuOUuFDhWsXJlo1MXzz1NMV51y5pln6lp2LF68mC677DKjVzdy5Ei9VA5xgfXdd9/pWv188803upbcBpuHya3Yeay9Vq9erWtgpfruu40d6HVVoErkzTcTDYc01PrbEF544QUjuCZNmqSXuJ+4wDrllFN0rX7s9GQGDhyoa/Vjpze31+DBg3UNrMSmTtW1umuI+0hHQ62/DWny5Ml08MEH65bL6U1DUTp16mS6fW639OnTR9+TtbZt25reh93C+wzS1a1bN9P7cmu54oor9DN3TmjjRtP9UumWkCpRfZ9O6dWrl+nf0Q3Fzr7dbBJ7lJCPTnH3umXLltS3b1/673//q7+zz08//URbtmwx6vxrcvf3iCOOSPuoTEVFBa1du9ao8235CAw/Pj9ubUcddRS9qTYzdu7caTxWXfEYmG+//dao732+LVq0oA4dOhj1/XXs2NHYN7F9+3a9pOH5/X7j7222D0YFFj3++OO65YzgNddQwaOP6lb9RJ94goouu0y3nBGNRo1dBXvXS9amTRtq3bq1Ud8fL//iiy9o27Zteok1vk9eh/h9sWLFCnrvvffo7bff1t9NLRgMGkcYXYkDS7pDDz30gE8KJ341s8esS48qHWaP2b17d/3dzFq/fr3p4zvdw4qpUqUe16zHtLdEVfl59Gjjq9n39y8VXbok7tgFzP6+hxxyiP5u/c2bNy/erFkz08fZv7hVTox0V7+HrjmHPyHNxGJOH3dy7jHdMvI5rHqTvMM8FX51GpeVGUcSrfjXraOI6lW4VUO+vtxD/vnnn+mRRx7RS8zxuC03wqk5IE78nnt0Lbl4aWli9Pu4cUY7Fd4gq3Z453u2XXvttfTDDz/o1oG+/PJLUr0x3XIPBBaIwn0Nz5w5iUYKnokTja/eW24xvlqJp3k+Yi5Qm5pUXl6uWwc666yzdM09EFggSmT2bMvzBnlzMNC/v1EPdOtGERs7kP1qcze0Zo1u5Y+DDjqIPvjgA9060Msvv6xr7oDAAlFiNjYH6Yoragwo9dx6q66llo+9LHbiiSfS6aefrls1TZkyRdfcAYEFYnDPyffZZ4lGCt6bb9a1BJ/aLLR1WGbmTHs/l4OS7a9atmyZrrkDAgtsS3Y01qmjlNXTplmusOGiIgp07qxbCTyGLNqjh24lx0cewwsXJhp5hscWHn300bpV08r6nK/ZwBBYYFuTJk10raZGjRrpWmbxuYNWaveu9vLa3Cx0+lQdN7ngggt0rably5frWvYhsMC29u3b61pNTsxAEC4vp8BPP+mWOe7/+ZIEVsHvfmdM9mfFO3++rZ/LRcnOzDA7iyRbEFh5jDfxZs2aRUuWLNFLrNXe13HSSSc5csK2nWmQI127kj/JEUE+shizMTUR/1w0Ty9Qkex0nGSDpLMBgZWn3n//fWO/xYgRI+j444+nww47TH8nNe5NRSIRmjNnjnEu3IIFC/R3Mit+//26lpzvppt0zZzdMVn5uln4/fff61pNzZo107XsQ2DlqdpT5/B0vU888YRupVZQUGAMKuTppp0QWr6c/LqeDO/2L7j88kQjiYDqDdrpK/i+/trWKT255t1339W1mrqqnqtbILDyUGVlpa7V9MYbb+iau8Rt9HiqTzzRckCpMTbLxqwM/KaotjPeK8fMTnKR2RNOOEHXsg+BlYf27NmjazVVVVXpmnsYAyZeeMGop+K12Bzcy+4g0pjLBkxmGl9oJRmnjgLbgcDKQ8nmA0u2PJsiqtdnZ2YG/xlnJBoWCjt3pkjjxrqVXGDXLgpv2qRbue/KK6/UtZp4rjM3QWDVEe/HcQufz2pjqCY3fWJasbMDPH7BBWmtyB7sfK+hZ8+eunage++9V9fcIScupHrooYf+/3UD98cnbqY6G72u+OgaH+q93GQn73HHHZfWMIF0mfWC2rZtS2VlZcYsp1Y43Phvcumll+ol+wwdOpTeeust3co+7jnF1O9rFUbVn31Ghccco1vWIjwyX/0drPqTvOO9SL09nOx3mr2+PP7txx9/1K2Gxevrp59+qls1uW19MHBgScczMvKv4oaiVgD9rDLD7DEbqqgVVD+KOwRnzDCdIXT/UqkKz0CarspevUzvr3YJLlmib+EMs9dFBZb+bsPZtWtXXPW0TR9vb3EjbBKCa9mZVM/zhz/UqQdk91QdO0copbnqqquMsVXJjhazZEcMsw2BBa7EUxbz1MVWPElOxbFSMHq0rVNwPK+84vjFVmtLdx+lGb4QxahRo4xNTqsLhowbN47OO+883XKXnN6HlQ3Z2IfVUNy0zyJ4++1UcOedumUuXFJCjWzst0umavhw8tu4kGq16m0UOvQGNnt9mzdvTo899pgxF7tdapOP1q9fb0wPs3TpUr3UGofaP918apKxYSgc9mE1THHTPqwKv990n9L+JTh1qv7pugm+/77p/dYulcceq2+ReWavi1NlxowZ+lm4V073sD7++OOMXKuPjxLy+XRnn322XrJPNnpYfN26mTNn2j5KuGPHDrr66qv1kn3c0sMKrV5Nvu7ddcucsdLGYuSvR4+T7yOkbm81QIU3Cb3qbeLEQJZM9qCT4as+86lZTZs21UtczIgt4ZL1sDLN7DGz0cPq0aOH/q49fHVfs/txSw+ratw4057O/oWP8jWEqquuMr3/2qVq2jR9i8wye10yWcrKyvQjy4Cd7nXkpik3qqvTm8Ep1dGhbON3EU9VbMX70EO6Vj/eadN0LbVcmu+dBw4/+eST/IlOo0eP1ktlyOlNwkz+ahxYPPVubdnYJOzWrRutVptRdvHl+3kzsrYhQ4bQ/PnzdSs7QgsWkG/QIN1KLn7MMeThoK7va6w2g2Iffmh5uNzojqhN6UDz5okFGZKpTcKOHTvSOeecQ9dcc43tqYTcCIFVR5IDq6KiwnS649LSUpo7d65uZUfVsGHktxmaDfXq2o2I6MSJVJThWRzMXt9WrVrR66+/bux7tMLrPO9jLS4uppYtW1Lnzp1FnYplBYFVR5IDi5ndz/Tp02n8+PG65TzesI2q51X/UUeZEVGlOMNvF7PXhS94muoqzfkE+7DyVO1NPz5frS5htXjx4gY7EhstK3NtWDH+eAp99VWi4SCnrkokAQIrT/H+qmAwSM8++ywtXLgw7ZNr+Uoq3Bvo16+fscnC+0fqS8LsCPE8nNjPTbBJWEfSNwnry+x5vP3223TqqafqVnoi/Fp5vY7OjFAXfGw4oJ5rpj7pzf6umZytQRr0sCBtyYZF8BV46oqnJHZ7WDEePBqxcToPZAYCC9KWbER9sqmX7bA7JTH3mTNV7Mrni61mGzYJ6yifNwk3b95selHVkSNH0nPPPadb9oXV5o73kEN0K7nqkhLyP/AAn9mrlzSg4mKKvPgi+RYt0guSy+SpOtgktMCBJV02Ts2JRCKmj6kCS/9EZpg9pgos/V1nbNq0yfR5qMDSP5GeqmuuMT0dpnapmjRJ3yIzghs2mD6uWQk+8YS+VcMy+7tmYgI/qbBJCFllvCOnT080LHj/+Eddy4zCjh0pYnOufjuTC0LDQ2BBVoXV5vOBG9YHirRsmfHTYphn4kRdS82/di1FQiHdAqcgsCCr7O7A9mS4d7WX12Zg8Z6m6hw6IVoKBBZkjbHzes6cRCMF3mz0Xn99opFhgZISCpucGG4mhsByHAILsiby0ku2TsWJtG9PgaIi3co8n81eViAcptCaNboFTkBgQdbY3RzM9M722rwTJhi9Ojty8ao6bpYTgWU2diXTkl35ORvPxenHNBt/li4+xcX32WeJRgocHD4VIE7i3y5yxBGJhpW//912uNVVNtYptxI5cJQHLu7VunVrY3KyTZs26SX78K+2/8+ydu3a6Vp6+P73rjg8L3ooFDIet7a+ffsaMxhs27bNaPNt+MrMdbH/Y/JXPsnYLCy6dOlCq1atoq1bt+olmcOPz4N0+/Tpo5fsk87A0dC0aeS77jrdSi7StSsVZ2GzK/TMM+QbO1a3UqteuJAKBw7ULfvM1k2zcOLlPL0MT7xoV33WO1fjwJJi0KBBHK71LsOHD9f3aK1nz56m95FuGTNmjL5HawMGDDC9D7eXdAaOVrZpYzogs3ap+utf9S2cFVUlaPJ8zErlsGGJG9k0ePBg079fJsqFF16oHzU3iAmsyy+/3PQFqWsZP368vufkhgwZYnrbupa7775b33NyHGxmt5VQ7AZWqLzc9I1fu4T4q75NNlQOHGj6vGoXDjYOODsaej22UyZl+AwBJ4kJrDbqE9nsxahr4fuzYna7+hS1GaXvObmSkhLT20oodgOr6uabTd/4tUtl7976FtkRfPVV0+dlVoLPP69vlZraTDP922Wy9GqgKwy5gZid7p06ddK1hsH7fax06NBB1xpG165ddS25hv493Shmc954j419XJnkP+MMW5ezZ/GXXtK11Mz2e2aanXVdDB1crpfshNu6lq1bt+p7Tm758uWmt61r4ROmraxfv970thLKueeeq3+L1CpbtTLtpexf0tnMyqTKESNMn1/tUvGrX+lbpPbjjz+a/u0yWSorK/WjyyfuKOH9999Pa9eu1a308JGT7t2703VpfHLz0cAHH3ywzhcB4CuY9O7d2/RKy6ncd999tG7dOt1yP/47DRgwgC6++GK9JLnQq6+Sp7Q06Zga7tVwj6Xo3HMTC7KIn0tYrTepBnLwz3iWLqXAsccmFthQn/XYDl7vevbsaVzWK5fkxHxYIA/PJ1b973+T6jqTt7KSqtUbzMuXHlObzQUqzNx0MQp+g4QXLSLPN99QtLycCtRzN7oujRuTp21b8o0c6chl7AGBBQCC4NQcABADgQUAYiCwAEAMBBYAiIHAAgAxcJQQ3KmaKBKLkNeT5meqWp291R7y+HyJj2M3jY+AekNggbvEiEZEH6VZvndU2NRnHii1WvOIzlgjah5vTp2oFfX1dKIh8d40wnMcef1IMokQWOAeak1sEr2SKvx8ZelGqtR34jpetfcWnkGeEyyiSpBahzvTDTSMbvQOT1x/HkRAYIFrLAivpEGB21StRWJBxvAqz+EVUjlWRZdES2mmbxw2HwXATndwjY+JL7dfmGhkFPfcuFvVWL0DWtJTgXfVknNpVmiJ8V1wLwQWuEYwFlb/13czMF38eGrz01dCIwqn0PnBvyY6YOBKCCxwDY/jYbU/fiu0opeK3qcTI3chtFwKgQVQQzP6KPAFXRqaqdvgJggsECioyu4UZY8qFapUqcKbmel2l0poZtEc+iS0SrfBLXCUEFxjUvAlmlw0W9V4SEMyQbo+eAYN9RypajxEYZ+4+heORylUUE1bY7tpnWcrLY2vo8Xe5XroAt+v3TEM1UTRaop7y/Cx7iIILHANe4G1h2ZHbqDz/PZn9+QhWO9GV9BYeoo2BjaoBSWq2Nlftotmhq+hSwLpX3MQMgOfHSBOyLhudBrUWn5K4Ej6IfAgPRX8veqKbVcL7XxON6IbaZaugxsgsCCvjC0aSPPDk1WtXBWr0PJReeAH2hPmfWHgBgisPFBZWUknn3wytWnThkaMGKGX5q8hhb+gYaEBqsY75FPhzcYi+rdnaaIJWYfAygONGzemhQsX0pYtW2jWrFl00EEH6e/krzLPpep/Pppo1csqoA/i3+k6ZBsCK8e9+OKLurbPzp076bvv8vtN2CpQQkXh1qrGJ0Wn4qUV9KOuQ7YhsHJcsmBauXKlruWvoXSE+t9qB76XfvL8rOuQbQisHBeLWfUg8lc3stPD8tDuah6oCm6AwMpxfLVrMNcoxtdzttqHFadCDybMcgsEFuStXd6Q+t8q0OPU2scDTcENEFiQt7728M50q1n7YnRYjDcdwQ0QWJCf1Jbge54vVMVqcy9Kx1NXXYdsQ2BBXloYWamyik+etnoLhOhs6qPrkG0ILMg/qnd1umeaqjROtJOKEUWaUA9/e92GbENgCRGNRmnZsmW65bwdO3bQxx9/rFuynRl+iCr9u1TNanOwim6Jl9qb2AEcgcAS4Omnnya/30+//OUvqWvXrvTAAw9QJFJzLqhMqKqqojvuuIOKioqoRYsW1L9/f2OYxJdffql/Qphqon6hyfRa4SeqkWoKG6a6YdUhmuK7QLfBDRBYLhcKheiSSy7RLaJ169bRDTfcQIFAgNq3b09Tpkyh3bt5ls2G87e//Y06d+5MjRo1oj//+c/Gc9hfnz7Z3acTsD0Jn6ay/a7wPNVRGkGLC79RC5omlqf0M02LXoVLf7kMAsvlXnvtNV070ObNm+m2226jZs2aUcuWLen222+nbdu26e+mVntA6Zw5c6hfv37G8quvvpo2bOCJ7pLj4MwOHy2Lr6cPo9/SO9EVB5S3I1/RS+GlND38Dl0ZeYa6hm8kT8FZ9D+BF9RNeZ9VUeJuUqqi3uHD6feBIboNboEZR12Og4E3A9PBszNce+21Rpg9++yzNH78eP2dfT755BPj5zjkXnnlFb3UvkysNvZmHGU8P1WqTWIOY/4s5u4R98b4q90dUUFqHGlKe7yPo3flQggsAcaOHUvPPPOMbmXfY489RlddpTaXGpj9wMoEfhtUUNtwO9pc8DC2PVwKL4sAvNN91apVNHr0aL3Eeb169aKpU6caRyszEVbZxTM2bKXfBgfTZj/Cys3w0gjRvXt3KisrMzbFvv32W5owYQIVFxfr72bGMcccQzNnzjQek6ejuemmm8jny5XtJO5R8cGEcmoebkwrwo/Rs0WX299yhKzAJqFw5eXl9Pjjj9OMGTPo+++/10vr7te//rXRg7rooov0Euc4t0moVvlIhMZHT6XrC4ZRFz/OFZQCPSzheHzUrbfeahzV488eDi7uGaXjtNNOo3nz5hm3X7RoUVbCylmqG+X306OFb9JHMUx/LAl6WDnMai6sTp060fr163Ur++z3sJKtsuluz/H9bKcJwQvpgaKRiUXgauhh5Sg+smiFe2WTJ/MlryRRIROvUmWXKj/rourVO9T3+NJdPJ0xD3uwM9MqB1wrerDoX/RIcH5iEbgaelg5aMGCBTRo0CDdsvb5559nffQ6s3vl5zdDt9Ew/y90W+N8Umvy5/F19CItpfu8c4kKqtVCHixq1fPiENxCayNPUZcA9me5GXpYOShZWH300Ue6VlPfvn11TYZyb0Vizd2/8PhQv/pdAl3o3sCFFPc+T3eELlJBxFd5tp63nTytqKt3or2OGWQNAivH8MVSzfD1CE844YSkY7lKSnJsGmC1Zt9eeA6tjsxQIcSbiVZJ5FOhV0l3RtIf9Q/OQWDlED4dhy+WWttxxx1H559/vlHnsVxmdu3aRWeffbZu5Y5ugbb0bXS67mlZ7f1oQrcXqL8Pb0mCKyGwcsSnn35K06erN6aJJUuW6FpCsmsVzp0711WnADWUHoH29Jfw3is9p6I2DX2FdH30Bd0Gt0Fg5QjuRZl56623dG2fww47jK688krdqomPLm7atEm3csdtgVIqjPBmr1X3qZgeLJiNXpZLIbByQJcuXXStJt75PnToUN2qiee8SnaaTYcOHXQth6jO0+vxP6gKzzSaCveyCujhagxzcCMElnA8mV+ywZ/vvfeerplLdSoP98JyzeDAkdQkwsMWrC5PX0wTPP+y3uUFjkNgCcZzXfF0yWY+/PBDXUuOZyy98cYbdaumNWvWGLON5pon4xer/ysTjaR8FPfvpCWR1boNboGBo0LxnO48TbKZ0tJSYwe6XU2aNKGKigrdqsnJ1cPuwNHnItfRSH8/3U5TTK30sd8QFfDMo6k+r8P063BvWhS4RbfBDdDDEuqdd97RtQOlE1Zs48aNunYgJy524Si1xk+IlapKzXnqD+Sn9/2fpJ7YFByHwBJq+PDhulbTV199pWv2NW/enO655x7d2ocvQsFX68k1f/Gco7qOPMQhVe+RR783pknxl3Ub3ACBJRiPvdrf/Pnz6cgjj9St9EycOJH+9Kc/6RYZm5s811YuKvYXUa8I/52sdr4X0WTPK9j57iIILMH4OoW8j2n79u3G1yFD6neVlzvvvNO4Hx71zpf2Kiws1N/JPXcSj+rnWR1SUW8PfyW9F1mh25BtCKwcwJP4NaSmTe1ct0+28wuO04NDrc4xbEQTiQ8EgBsgsCA/qTX/kuphqhJOtJPy0+f+z3Pv4INQCCzIW3+hc9T/dna+N6Gb4rN0G7IJgQV5q12gBbUNd1Y1qxMHC+kh7zzMleUCCCzIa5ONXlYw0UhKvU0KqmludJluQ7YgsCCvXeo7SfWceD+W1diFYppI2CzMNgQW5Dcf0blRnlLaaud7Aa0KrKSdEas5tSCTEFiQ9xKbhebnUu7jUaUJ3RFP77QnaFgILMh7vQOHUFH4YFWz3vk+zfMGRr5nEQILXMRmEmQgMCYbI99t7Hz3V9HKSPKTxSGzEFjgGlFbSRSniKfh5y++wTucKMabhVbPwU8f0CpdB6chsMA1TvfyxVH5Cs68A5wHPe0ND/7KIRVS1V10Jh1tLG1QBUSjI2eoCj8+nxS9f3BxnZ8PP68dNIh68ULIAgQWuEb/wOE0LzyFjgl3I4qogApvU0tVCW0nb8RLJ4WPpK+jf6cW/syc61gWuILuCI+hg/liFeHdKre2qpxSJbhd1avp6HBneit8P3UPtNO3AKdhxlEAEAM9LAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGhjWA4zasj9DUO+IUj3vIw+cUu5QxXDUap1FjiU4abH7RWnAWAgsctWd3lJo2446915j/QAJ+g7w+N0TDS3P3KkJSILDAUbf8MUxTHw5QM92WgK8R3aNrmJavQS8r27APCxz16WI+fViWAlVWrMVbxQ3wKoCjdpR7xK10/HzjiT1aRhuyB4EFjiooiBlvfXn4rSJlr1vuQmCBozp19Yrrp/DzLTHm4MLbJdvwCoCjfvPbuBEA3Muqb7HD7HbplkpVzv+N+g+yDkcJwWFxuuCMMM1+nXdl12cTy0NNVUl1D7xiJ67rXL8roB7RKUIr1vOhAny+ZxteAXCYh2a9VmgMGuWPyrqWTz6K0W59j8lwWN16Q1D9fH0eK67Cisdf4a3iBngVIEt41at7qdhj3TtTeUPBIP8cF/P7sS4+VcAt+BUBEId7P5B/EFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBQBiILAAQAwEFgCIgcACADEQWAAgBgILAMRAYAGAGAgsABADgQUAYiCwAEAMBBYAiIHAAgAxEFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBQBiILAAQAwEFgCIgcACADEQWAAgBgILAMRAYAGAGAgsABADgQUAYiCwAEAMBBYAiIHAApHiMY+upRaL6QrkBAQWiNSocdT4Gjf+T65JE12BnOCJK7oOIEic+vYI0xffFer2gRpRhCri/JnsSywA8RBYINrmTWH633c89MOGGEUjheTxRqhde6J+J8ap1xF+9RP2Nh1BBgQWAIiBfVgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABADAQWAIiBwAIAMRBYACAGAgsAxEBgAYAYCCwAEAOBBQBiILAAQAwEFgCIgcACADEQWAAgBgILAMRAYAGAGAgsABADgQUAYiCwAEAMBBYAiIHAAgAxEFgAIAYCCwDEQGABgBgILAAQA4EFAGIgsABACKL/A96eVWvjq4h9AAAAAElFTkSuQmCC"
    var gGlobal = {
      ImageFileInputId: "id_Input_ImgFile",
      ImageFileLoadButtonId: "id_Input_ImgFile_load_btn",
      ViewCanvasId: "id_ViewPoint",
      HiddenCanvas: document.createElement("canvas"),
      ReferenceImage: document.createElement("img"),
      ReferenceImageAvailable: false,
      mouseHandler: {
        x: -1,
        y: -1,
        xInput: - 1,
        yInput: - 1,
        mouseUsed: false
      },

      offsetArrayX: null,
      offsetArrayY: null,
      velocityArrayX: null,
      velocityArrayY: null,
      lastIterationTime: 0
    };

    function init() {

      gGlobal.ReferenceImage.src = wBaseImage;
      resize();
      window.addEventListener("resize", resize);

      var wLoadButton = document.getElementById(gGlobal.ImageFileLoadButtonId);
      if (null != wLoadButton) {
        wLoadButton.addEventListener("click", function () {
          var wInputFile = document.getElementById(gGlobal.ImageFileInputId);
          if (null != wInputFile) {
            if (wInputFile.files && wInputFile.files[0]) {
              gGlobal.ReferenceImage.src = URL.createObjectURL(wInputFile.files[0]);
            }
          }
        })
      }

      gGlobal.ReferenceImage.onload = function () {
        gGlobal.ReferenceImageAvailable = true;
        resize();
      }

      var wViewPointCanvas = document.getElementById(gGlobal.ViewCanvasId);
      if (null != wViewPointCanvas) {
        wViewPointCanvas.addEventListener("mousemove", function (iEvent) {
          gGlobal.mouseHandler.xInput = iEvent.offsetX;
          gGlobal.mouseHandler.yInput = iEvent.offsetY;

          if (false == gGlobal.mouseHandler.mouseUsed) {
            gGlobal.mouseHandler.x = gGlobal.mouseHandler.xInput;
            gGlobal.mouseHandler.y = gGlobal.mouseHandler.yInput;
            gGlobal.mouseHandler.mouseUsed = true;

          }

        })
        
        wViewPointCanvas.addEventListener("mouseout", function (iEvent) {
          
          if (true == gGlobal.mouseHandler.mouseUsed) {
            gGlobal.mouseHandler.mouseUsed = false;
          }
        })
        
        
        wViewPointCanvas.addEventListener("touchstart", function(iEvent) {
        
          var wViewPointCanvas = document.getElementById(gGlobal.ViewCanvasId);
          if (null == wViewPointCanvas) {
            return;
          }
      
          var wNode = wViewPointCanvas;
          var wLeftOffset = 0;
          var wTopOffset = 0;
          
          while (document.body != wNode){
            wLeftOffset += wNode.offsetLeft;
            wTopOffset +=  wNode.offsetTop;
            wNode = wNode.parentNode;
          }
          
          
          gGlobal.mouseHandler.xInput = iEvent.changedTouches[0].pageX - wLeftOffset;
          gGlobal.mouseHandler.yInput = iEvent.changedTouches[0].pageY - wTopOffset;
          
          if (false == gGlobal.mouseHandler.mouseUsed) {
            gGlobal.mouseHandler.x = gGlobal.mouseHandler.xInput;
            gGlobal.mouseHandler.y = gGlobal.mouseHandler.yInput;
            gGlobal.mouseHandler.mouseUsed = true;
          }
        });
        
        wViewPointCanvas.addEventListener("touchmove", function(iEvent) {
        
          var wViewPointCanvas = document.getElementById(gGlobal.ViewCanvasId);
          if (null == wViewPointCanvas) {
            return;
          }
                
          var wNode = wViewPointCanvas;
          var wLeftOffset = 0;
          var wTopOffset = 0;
          
          while (document.body != wNode){
            wLeftOffset += wNode.offsetLeft;
            wTopOffset +=  wNode.offsetTop;
            wNode = wNode.parentNode;
          }

          gGlobal.mouseHandler.xInput = iEvent.changedTouches[0].pageX - wLeftOffset;
          gGlobal.mouseHandler.yInput = iEvent.changedTouches[0].pageY - wTopOffset;
        
        });
  
        wViewPointCanvas.addEventListener("touchend", function (iEvent) {
          
          if (true == gGlobal.mouseHandler.mouseUsed) {
            gGlobal.mouseHandler.mouseUsed = false;
          }
        })
      }

      gGlobal.lastIterationTime = (new Date).getTime();
      gameLoop();
    }

    function gameLoop() {

      var wTime = (new Date).getTime();
      var wDt = wTime - gGlobal.lastIterationTime;
      wDt /= 1000;

      gGlobal.lastIterationTime = wTime;


      var wSmooth = 0.8;
      gGlobal.mouseHandler.x += wSmooth * (gGlobal.mouseHandler.xInput - gGlobal.mouseHandler.x);
      gGlobal.mouseHandler.y += wSmooth * (gGlobal.mouseHandler.yInput - gGlobal.mouseHandler.y);

      var wViewPointCanvas = document.getElementById(gGlobal.ViewCanvasId);
      if (null == wViewPointCanvas) {
        return;
      }

      var wCanvasWidth = wViewPointCanvas.width;
      var wCanvasHeight = wViewPointCanvas.height;

      if (true == gGlobal.ReferenceImageAvailable) {

        var wScaleW = gGlobal.ReferenceImage.width / wCanvasWidth;
        var wScaleH = gGlobal.ReferenceImage.height / wCanvasHeight;

        var wScale = wScaleW > wScaleH ? wScaleW : wScaleH;
        wScale = 1 / wScale;


        var wXOffset = (wCanvasWidth - wScale * gGlobal.ReferenceImage.width) / 2.0;
        var wYOffset = (wCanvasHeight - wScale * gGlobal.ReferenceImage.height) / 2.0;

        var wHiddenImgCtx = gGlobal.HiddenCanvas.getContext("2d");
        wHiddenImgCtx.clearRect(0, 0, wCanvasWidth, wCanvasHeight);
        wHiddenImgCtx.drawImage(gGlobal.ReferenceImage, wXOffset, wYOffset, wScale * gGlobal.ReferenceImage.width, wScale * gGlobal.ReferenceImage.height);

        var wHiddenImgData = wHiddenImgCtx.getImageData(0, 0, wCanvasWidth, wCanvasHeight);
        var wHiddenImgPixelArray = wHiddenImgData.data;


        var wViewImgCtx = wViewPointCanvas.getContext("2d");
        wViewImgCtx.clearRect(0, 0, wCanvasWidth, wCanvasHeight);

        var wViewImgData = wViewImgCtx.getImageData(0, 0, wCanvasWidth, wCanvasHeight);
        var wViewImgPixelArray = wViewImgData.data;

        var wK = 1000;
        var wC = 750;
        var wQ = -750000;
        var wRadLimit = 500;
        var wRadLimitSq = wRadLimit * wRadLimit;

        for (var wi = 0; wi < gGlobal.offsetArrayX.length; ++wi) {

          var wMappedIndex = wi * 4;
		  
		  if (0 == wHiddenImgPixelArray[wMappedIndex + 3]) {
			continue;
		  }
          var wMass = 0;
          wMass += wHiddenImgPixelArray[wMappedIndex];
          wMass += wHiddenImgPixelArray[wMappedIndex + 1];
          wMass += wHiddenImgPixelArray[wMappedIndex + 2];
          wMass /= 3;
          
		  wMass += 100;
		  
          var wX = wi % wCanvasWidth;
          var wY = Math.floor(wi / wCanvasWidth);
          var wDx = wX + gGlobal.offsetArrayX[wi] - gGlobal.mouseHandler.x;
          var wDy = wY + gGlobal.offsetArrayY[wi] - gGlobal.mouseHandler.y;

          var wFx = - wK * gGlobal.offsetArrayX[wi] - wC * gGlobal.velocityArrayX[wi];
          var wFy = - wK * gGlobal.offsetArrayY[wi] - wC * gGlobal.velocityArrayY[wi];


          if (true == gGlobal.mouseHandler.mouseUsed) {
            var wRadSq = wDx * wDx + wDy * wDy;
            if ((1 < wRadSq)) {

              var wRad = Math.sqrt(wRadSq);
              var wGain = (wRadLimit - wRad)/wRadLimit;
              if (wGain > 0.0) {
                var wFMag = wQ * wGain;
                wFx += wFMag * wDx / wRad;
                wFy += wFMag * wDy / wRad;
              }
            }
          }

          gGlobal.velocityArrayX[wi] += wDt * wFx / wMass;
          gGlobal.velocityArrayY[wi] += wDt * wFy / wMass;

          gGlobal.offsetArrayX[wi] += wDt * gGlobal.velocityArrayX[wi];
          gGlobal.offsetArrayY[wi] += wDt * gGlobal.velocityArrayY[wi];
        }




        for (var wi = 0; wi < gGlobal.offsetArrayX.length; ++wi) {

          if ((0 == Math.round(gGlobal.offsetArrayX[wi])) && (0 == Math.round(gGlobal.offsetArrayY[wi]))) {
            var wMappedIndex = wi * 4;
            wViewImgPixelArray[wMappedIndex] = wHiddenImgPixelArray[wMappedIndex];
            wViewImgPixelArray[wMappedIndex + 1] = wHiddenImgPixelArray[wMappedIndex + 1];
            wViewImgPixelArray[wMappedIndex + 2] = wHiddenImgPixelArray[wMappedIndex + 2];
            wViewImgPixelArray[wMappedIndex + 3] = wHiddenImgPixelArray[wMappedIndex + 3];

          }
        }

        for (var wi = 0; wi < gGlobal.offsetArrayX.length; ++wi) {

          var wDx = Math.round(gGlobal.offsetArrayX[wi]);
          var wDy = Math.round(gGlobal.offsetArrayY[wi]);

          if ((0 != wDx) || (0 != wDy)) {

            var wX = wi % wCanvasWidth;
            wX += wDx;

            var wY = Math.floor(wi / wCanvasWidth);
            wY += wDy;

            if ((wX >= 0) && (wX < wCanvasWidth)) {
              if ((wY >= 0) && (wY < wCanvasHeight)) {
                var wNewIndex = wY * wCanvasWidth + wX;
                wNewIndex *= 4;
                wOldIndex = wi * 4;

                wViewImgPixelArray[wNewIndex] = wHiddenImgPixelArray[wOldIndex];
                wViewImgPixelArray[wNewIndex + 1] = wHiddenImgPixelArray[wOldIndex + 1];
                wViewImgPixelArray[wNewIndex + 2] = wHiddenImgPixelArray[wOldIndex + 2];
                wViewImgPixelArray[wNewIndex + 3] = wHiddenImgPixelArray[wOldIndex + 3];

              }
            }
          }

        }

        wViewImgCtx.putImageData(wViewImgData, 0, 0);

      }


      requestAnimationFrame(gameLoop);
    }

    function resize() {
      var wViewCanvas = document.getElementById(gGlobal.ViewCanvasId);
      if (null != wViewCanvas) {

        var wWidth = wViewCanvas.parentNode.offsetWidth;
        var wHeight = wViewCanvas.parentNode.offsetHeight;

        wViewCanvas.width = wWidth;
        wViewCanvas.height = wHeight;

        gGlobal.HiddenCanvas.width = wWidth;
        gGlobal.HiddenCanvas.height = wHeight;

        var wArraySize = wWidth * wHeight;
        gGlobal.offsetArrayX = new Float32Array(wArraySize);
        gGlobal.offsetArrayY = new Float32Array(wArraySize);
        gGlobal.velocityArrayX = new Float32Array(wArraySize);
        gGlobal.velocityArrayY = new Float32Array(wArraySize);

        for (var wi = 0; wi < wArraySize; ++wi) {
          gGlobal.offsetArrayX[wi] = 0.0;
          gGlobal.offsetArrayY[wi] = 0.0;
          gGlobal.velocityArrayX[wi] = 0.0;
          gGlobal.velocityArrayY[wi] = 0.0;

        }
      }

    }

    window.addEventListener("load", init);
  </script>
  <style>
    body {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      margin: 0px;
      padding: 0px;
      background-color: black;
    }

    #id_ViewPoint_div {
      width: 100%;
      height: 100%;
    }

    #id_Input_Img_div {
      position: fixed;
      bottom: 0px;
      background-color: white;
    }
  </style>
</head>

<body>
  <div id="id_Input_Img_div">
    <input type="file" id="id_Input_ImgFile"></input>
    <button id="id_Input_ImgFile_load_btn">Load</button>
  </div>
  <div id="id_ViewPoint_div">
    <canvas id="id_ViewPoint"></canvas>
  </div>
</body>

</html>